---
title: ElasticSearch жЂ§иѓЅдјеЊ–дёЋе®ћи·µжЂ»з»“
---
жЂ§иѓЅдјеЊ–зљ„е‡ з‚№ж–№еђ‘пјљ

## жЇЏдёЄnodes зљ„зљ„е€†з‰‡зљ„и®ѕзЅ®

``` bash
$ index.routing.allocation.total_shards_per_node

```
иЎЁз¤єжЇЏдёЄnodes жњЂе¤§зљ„shards зљ„ж•°й‡ЏгЂ‚   еЃ‡е¦‚10дёЄе€†з‰‡пјЊ0дёЄзґўеј•пјЊдёЂдёЄе‰Їжњ¬пјЊ4дёЄnodesпјЊеЌі(10+10)/4=5  еЌіидЅ†жЇе®ћй™…ж€‘д»¬еє”иЇҐжЇ”е…¶и®ѕзЅ®зљ„ж›ґе¤§з‚№пјЊе› дёєеЃ‡е¦‚жџђдёЄnodesзљ„дё‹зєїпјЊе°±еЏЇиѓЅе€†з‰‡иїЃз§»е¤±иґҐ


## зєїзЁ‹иїћжЋҐж•°

``` bash
$ thread_pool.bulk.queue_size: 5000 

```
иї™дёЄдёєдє†йІж­ўиѕѓй«пјЊеђѓcpuпјЊд№џжЇдёєдє†и°ѓй«пјЊжЏђй«es зљ„и°ѓз”ЁзЁ‹еєЏзљ„ж•€зЋ‡

## shards зљ„и®ѕе®љ

еЃ‡е¦‚жЇе¤љдёЄnodesпјЊе¦‚жћњжЇжђњзґўењєж™ЇпјЊжЇЏдёЄshards дёЌиѓЅи¶…иї‡15gпјЊе¦‚жћњжЇж—Ґеї—ењєж™ЇпјЊжЇЏдёЄshards дёЌи¦Ѓи¶…иї‡30g

й»и®¤жЇдє”дёЄshardsпјЊз®ЂеЌ•еЏЇд»Ґе…€и°ѓж•ґж€ђеЌ•дёЄshards пјЊиї™ж ·е°±иѓЅзџҐйЃ“е¤ље¤§зљ„й‡ЏпјЊз„¶еђЋз”Ёshard еЌ•дёЄпј€еЌіжЂ»й‡Џпј‰/nodes ж•°й‡Џе°±дјљеѕ—е€°жЇЏдёЄshards зљ„й‡Џ

еЏ¦пјљеџєдєЋзЈЃз›зљ„е€†з‰‡

``` bash
$ cluster.routing.allocation.disk.threshold_enabledпјљtrue

```

## е†™жЂ§иѓЅдјеЊ–
и°ѓж•ґtranslog зљ„еЏ‚ж•°пјље¦‚refresh_interval ,index.translog.durability: async  гЂЃindex.translogthred.size

## jvm зљ„еЏ‚ж•°зљ„и°ѓдј
е‡†е€™пјље†…е­дёЋе­е‚Ёй‡Џд№‹жЇ”
дёЂгЂЃжђњзґўз±»1:16
дєЊгЂЃж—Ґеї—з±»пјљ1пјљ48

## е€†з‰‡й‡Ќж–°е€†з‰‡дёЋжЃўе¤Ќи®ѕзЅ®

``` bash
indices.recovery.max_size_per_sec: 0

```
и®ѕзЅ®ж•°жЌ®жЃўе¤Ќж—¶й™ђе€¶зљ„её¦е®ЅпјЊе¦‚е…Ґ100mbпјЊй»и®¤дёє0пјЊеЌіж— й™ђе€¶гЂ‚

``` bash
indices.recovery.concurrent_streams: 5
```
и®ѕзЅ®иї™дёЄеЏ‚ж•°жќҐй™ђе€¶д»Ће…¶е®ѓе€†з‰‡жЃўе¤Ќж•°жЌ®ж—¶жњЂе¤§еђЊж—¶ж‰“ејЂе№¶еЏ‘жµЃзљ„дёЄж•°пјЊй»и®¤дёє5

